# Setup Cluster

## 简介

### Share

* 分片 它是为了突破单机上限而设计

### Replica 副本

* 副本是为了高可用，避免硬件故障导致服务不可用





> 只分片提升了性能，但是只要有1个分片挂掉，服务不可用
>
> 只本分提升高可用，但是受限于单机瓶颈

## Cluster

### 

### 三分片一副本

### 一分片二副本

### 一致性验证

* 停止 `192.168.1.10`执行 `service clickhouse-server stop`
* 向分布式表插入10条数据

  `insert into ontime_all_2 select * from ontime limit 10;`

* 启动`192.168.1.10`执行 `service clickhouse-server start`



### 基于表的自动备份

必须配置 hosts\(排除 zoo.cfg 排除cluster.xml\)

```sql
CREATE TABLE `ontime_replica`(`Year`UInt16,`Quarter`UInt8,`Month`UInt8,`DayofMonth`UInt8,`DayOfWeek`UInt8,`FlightDate`Date,`UniqueCarrier`FixedString(7),`AirlineID`Int32,`Carrier`FixedString(2),`TailNum`String,`FlightNum`String,`OriginAirportID`Int32,`OriginAirportSeqID`Int32,`OriginCityMarketID`Int32,`Origin`FixedString(5),`OriginCityName`String,`OriginState`FixedString(2),`OriginStateFips`String,`OriginStateName`String,`OriginWac`Int32,`DestAirportID`Int32,`DestAirportSeqID`Int32,`DestCityMarketID`Int32,`Dest`FixedString(5),`DestCityName`String,`DestState`FixedString(2),`DestStateFips`String,`DestStateName`String,`DestWac`Int32,`CRSDepTime`Int32,`DepTime`Int32,`DepDelay`Int32,`DepDelayMinutes`Int32,`DepDel15`Int32,`DepartureDelayGroups`String,`DepTimeBlk`String,`TaxiOut`Int32,`WheelsOff`Int32,`WheelsOn`Int32,`TaxiIn`Int32,`CRSArrTime`Int32,`ArrTime`Int32,`ArrDelay`Int32,`ArrDelayMinutes`Int32,`ArrDel15`Int32,`ArrivalDelayGroups`Int32,`ArrTimeBlk`String,`Cancelled`UInt8,`CancellationCode`FixedString(1),`Diverted`UInt8,`CRSElapsedTime`Int32,`ActualElapsedTime`Int32,`AirTime`Int32,`Flights`Int32,`Distance`Int32,`DistanceGroup`UInt8,`CarrierDelay`Int32,`WeatherDelay`Int32,`NASDelay`Int32,`SecurityDelay`Int32,`LateAircraftDelay`Int32,`FirstDepTime`String,`TotalAddGTime`String,`LongestAddGTime`String,`DivAirportLandings`String,`DivReachedDest`String,`DivActualElapsedTime`String,`DivArrDelay`String,`DivDistance`String,`Div1Airport`String,`Div1AirportID`Int32,`Div1AirportSeqID`Int32,`Div1WheelsOn`String,`Div1TotalGTime`String,`Div1LongestGTime`String,`Div1WheelsOff`String,`Div1TailNum`String,`Div2Airport`String,`Div2AirportID`Int32,`Div2AirportSeqID`Int32,`Div2WheelsOn`String,`Div2TotalGTime`String,`Div2LongestGTime`String,`Div2WheelsOff`String,`Div2TailNum`String,`Div3Airport`String,`Div3AirportID`Int32,`Div3AirportSeqID`Int32,`Div3WheelsOn`String,`Div3TotalGTime`String,`Div3LongestGTime`String,`Div3WheelsOff`String,`Div3TailNum`String,`Div4Airport`String,`Div4AirportID`Int32,`Div4AirportSeqID`Int32,`Div4WheelsOn`String,`Div4TotalGTime`String,`Div4LongestGTime`String,`Div4WheelsOff`String,`Div4TailNum`String,`Div5Airport`String,`Div5AirportID`Int32,`Div5AirportSeqID`Int32,`Div5WheelsOn`String,`Div5TotalGTime`String,`Div5LongestGTime`String,`Div5WheelsOff`String,`Div5TailNum`String) ENGINE = ReplicatedMergeTree('/clickhouse/a/ontime', 'master', FlightDate, (Year, FlightDate), 8192);
```

```sql
CREATE TABLE `ontime_replica`(`Year`UInt16,`Quarter`UInt8,`Month`UInt8,`DayofMonth`UInt8,`DayOfWeek`UInt8,`FlightDate`Date,`UniqueCarrier`FixedString(7),`AirlineID`Int32,`Carrier`FixedString(2),`TailNum`String,`FlightNum`String,`OriginAirportID`Int32,`OriginAirportSeqID`Int32,`OriginCityMarketID`Int32,`Origin`FixedString(5),`OriginCityName`String,`OriginState`FixedString(2),`OriginStateFips`String,`OriginStateName`String,`OriginWac`Int32,`DestAirportID`Int32,`DestAirportSeqID`Int32,`DestCityMarketID`Int32,`Dest`FixedString(5),`DestCityName`String,`DestState`FixedString(2),`DestStateFips`String,`DestStateName`String,`DestWac`Int32,`CRSDepTime`Int32,`DepTime`Int32,`DepDelay`Int32,`DepDelayMinutes`Int32,`DepDel15`Int32,`DepartureDelayGroups`String,`DepTimeBlk`String,`TaxiOut`Int32,`WheelsOff`Int32,`WheelsOn`Int32,`TaxiIn`Int32,`CRSArrTime`Int32,`ArrTime`Int32,`ArrDelay`Int32,`ArrDelayMinutes`Int32,`ArrDel15`Int32,`ArrivalDelayGroups`Int32,`ArrTimeBlk`String,`Cancelled`UInt8,`CancellationCode`FixedString(1),`Diverted`UInt8,`CRSElapsedTime`Int32,`ActualElapsedTime`Int32,`AirTime`Int32,`Flights`Int32,`Distance`Int32,`DistanceGroup`UInt8,`CarrierDelay`Int32,`WeatherDelay`Int32,`NASDelay`Int32,`SecurityDelay`Int32,`LateAircraftDelay`Int32,`FirstDepTime`String,`TotalAddGTime`String,`LongestAddGTime`String,`DivAirportLandings`String,`DivReachedDest`String,`DivActualElapsedTime`String,`DivArrDelay`String,`DivDistance`String,`Div1Airport`String,`Div1AirportID`Int32,`Div1AirportSeqID`Int32,`Div1WheelsOn`String,`Div1TotalGTime`String,`Div1LongestGTime`String,`Div1WheelsOff`String,`Div1TailNum`String,`Div2Airport`String,`Div2AirportID`Int32,`Div2AirportSeqID`Int32,`Div2WheelsOn`String,`Div2TotalGTime`String,`Div2LongestGTime`String,`Div2WheelsOff`String,`Div2TailNum`String,`Div3Airport`String,`Div3AirportID`Int32,`Div3AirportSeqID`Int32,`Div3WheelsOn`String,`Div3TotalGTime`String,`Div3LongestGTime`String,`Div3WheelsOff`String,`Div3TailNum`String,`Div4Airport`String,`Div4AirportID`Int32,`Div4AirportSeqID`Int32,`Div4WheelsOn`String,`Div4TotalGTime`String,`Div4LongestGTime`String,`Div4WheelsOff`String,`Div4TailNum`String,`Div5Airport`String,`Div5AirportID`Int32,`Div5AirportSeqID`Int32,`Div5WheelsOn`String,`Div5TotalGTime`String,`Div5LongestGTime`String,`Div5WheelsOff`String,`Div5TailNum`String) ENGINE = ReplicatedMergeTree('/clickhouse/a/ontime', 'slave1', FlightDate, (Year, FlightDate), 8192);
```

```sql
CREATE TABLE `ontime_replica`(`Year`UInt16,`Quarter`UInt8,`Month`UInt8,`DayofMonth`UInt8,`DayOfWeek`UInt8,`FlightDate`Date,`UniqueCarrier`FixedString(7),`AirlineID`Int32,`Carrier`FixedString(2),`TailNum`String,`FlightNum`String,`OriginAirportID`Int32,`OriginAirportSeqID`Int32,`OriginCityMarketID`Int32,`Origin`FixedString(5),`OriginCityName`String,`OriginState`FixedString(2),`OriginStateFips`String,`OriginStateName`String,`OriginWac`Int32,`DestAirportID`Int32,`DestAirportSeqID`Int32,`DestCityMarketID`Int32,`Dest`FixedString(5),`DestCityName`String,`DestState`FixedString(2),`DestStateFips`String,`DestStateName`String,`DestWac`Int32,`CRSDepTime`Int32,`DepTime`Int32,`DepDelay`Int32,`DepDelayMinutes`Int32,`DepDel15`Int32,`DepartureDelayGroups`String,`DepTimeBlk`String,`TaxiOut`Int32,`WheelsOff`Int32,`WheelsOn`Int32,`TaxiIn`Int32,`CRSArrTime`Int32,`ArrTime`Int32,`ArrDelay`Int32,`ArrDelayMinutes`Int32,`ArrDel15`Int32,`ArrivalDelayGroups`Int32,`ArrTimeBlk`String,`Cancelled`UInt8,`CancellationCode`FixedString(1),`Diverted`UInt8,`CRSElapsedTime`Int32,`ActualElapsedTime`Int32,`AirTime`Int32,`Flights`Int32,`Distance`Int32,`DistanceGroup`UInt8,`CarrierDelay`Int32,`WeatherDelay`Int32,`NASDelay`Int32,`SecurityDelay`Int32,`LateAircraftDelay`Int32,`FirstDepTime`String,`TotalAddGTime`String,`LongestAddGTime`String,`DivAirportLandings`String,`DivReachedDest`String,`DivActualElapsedTime`String,`DivArrDelay`String,`DivDistance`String,`Div1Airport`String,`Div1AirportID`Int32,`Div1AirportSeqID`Int32,`Div1WheelsOn`String,`Div1TotalGTime`String,`Div1LongestGTime`String,`Div1WheelsOff`String,`Div1TailNum`String,`Div2Airport`String,`Div2AirportID`Int32,`Div2AirportSeqID`Int32,`Div2WheelsOn`String,`Div2TotalGTime`String,`Div2LongestGTime`String,`Div2WheelsOff`String,`Div2TailNum`String,`Div3Airport`String,`Div3AirportID`Int32,`Div3AirportSeqID`Int32,`Div3WheelsOn`String,`Div3TotalGTime`String,`Div3LongestGTime`String,`Div3WheelsOff`String,`Div3TailNum`String,`Div4Airport`String,`Div4AirportID`Int32,`Div4AirportSeqID`Int32,`Div4WheelsOn`String,`Div4TotalGTime`String,`Div4LongestGTime`String,`Div4WheelsOff`String,`Div4TailNum`String,`Div5Airport`String,`Div5AirportID`Int32,`Div5AirportSeqID`Int32,`Div5WheelsOn`String,`Div5TotalGTime`String,`Div5LongestGTime`String,`Div5WheelsOff`String,`Div5TailNum`String) ENGINE = ReplicatedMergeTree('/clickhouse/a/ontime', 'slave2', FlightDate, (Year, FlightDate), 8192);
```

```sql
INSERT INTO ontime_replica SELECT * FROM ontime
```

### 一份片三副本

* 创建分布式路由表
* 路由到集群`cluster_1shards_3replicas`

```sql
CREATE TABLE ontime_replica_all AS ontime_replica ENGINE = Distributed(cluster_1shards_3replicas, default, ontime_replica, rand())
```

### 三分片二副本

[https://www.altinity.com/blog/2018/5/10/circular-replication-cluster-topology-in-clickhouse](https://www.altinity.com/blog/2018/5/10/circular-replication-cluster-topology-in-clickhouse)



```sql
use testcluster_shard_1
drop table `ontime_replica`
CREATE TABLE `ontime_replica`(`Year`UInt16,`Quarter`UInt8,`Month`UInt8,`DayofMonth`UInt8,`DayOfWeek`UInt8,`FlightDate`Date,`UniqueCarrier`FixedString(7),`AirlineID`Int32,`Carrier`FixedString(2),`TailNum`String,`FlightNum`String,`OriginAirportID`Int32,`OriginAirportSeqID`Int32,`OriginCityMarketID`Int32,`Origin`FixedString(5),`OriginCityName`String,`OriginState`FixedString(2),`OriginStateFips`String,`OriginStateName`String,`OriginWac`Int32,`DestAirportID`Int32,`DestAirportSeqID`Int32,`DestCityMarketID`Int32,`Dest`FixedString(5),`DestCityName`String,`DestState`FixedString(2),`DestStateFips`String,`DestStateName`String,`DestWac`Int32,`CRSDepTime`Int32,`DepTime`Int32,`DepDelay`Int32,`DepDelayMinutes`Int32,`DepDel15`Int32,`DepartureDelayGroups`String,`DepTimeBlk`String,`TaxiOut`Int32,`WheelsOff`Int32,`WheelsOn`Int32,`TaxiIn`Int32,`CRSArrTime`Int32,`ArrTime`Int32,`ArrDelay`Int32,`ArrDelayMinutes`Int32,`ArrDel15`Int32,`ArrivalDelayGroups`Int32,`ArrTimeBlk`String,`Cancelled`UInt8,`CancellationCode`FixedString(1),`Diverted`UInt8,`CRSElapsedTime`Int32,`ActualElapsedTime`Int32,`AirTime`Int32,`Flights`Int32,`Distance`Int32,`DistanceGroup`UInt8,`CarrierDelay`Int32,`WeatherDelay`Int32,`NASDelay`Int32,`SecurityDelay`Int32,`LateAircraftDelay`Int32,`FirstDepTime`String,`TotalAddGTime`String,`LongestAddGTime`String,`DivAirportLandings`String,`DivReachedDest`String,`DivActualElapsedTime`String,`DivArrDelay`String,`DivDistance`String,`Div1Airport`String,`Div1AirportID`Int32,`Div1AirportSeqID`Int32,`Div1WheelsOn`String,`Div1TotalGTime`String,`Div1LongestGTime`String,`Div1WheelsOff`String,`Div1TailNum`String,`Div2Airport`String,`Div2AirportID`Int32,`Div2AirportSeqID`Int32,`Div2WheelsOn`String,`Div2TotalGTime`String,`Div2LongestGTime`String,`Div2WheelsOff`String,`Div2TailNum`String,`Div3Airport`String,`Div3AirportID`Int32,`Div3AirportSeqID`Int32,`Div3WheelsOn`String,`Div3TotalGTime`String,`Div3LongestGTime`String,`Div3WheelsOff`String,`Div3TailNum`String,`Div4Airport`String,`Div4AirportID`Int32,`Div4AirportSeqID`Int32,`Div4WheelsOn`String,`Div4TotalGTime`String,`Div4LongestGTime`String,`Div4WheelsOff`String,`Div4TailNum`String,`Div5Airport`String,`Div5AirportID`Int32,`Div5AirportSeqID`Int32,`Div5WheelsOn`String,`Div5TotalGTime`String,`Div5LongestGTime`String,`Div5WheelsOff`String,`Div5TailNum`String) ENGINE = ReplicatedMergeTree('/clickhouse/shard1/replica', 'replica_1', FlightDate, (Year, FlightDate), 8192);
use testcluster_shard_3
drop table `ontime_replica`
CREATE TABLE `ontime_replica`(`Year`UInt16,`Quarter`UInt8,`Month`UInt8,`DayofMonth`UInt8,`DayOfWeek`UInt8,`FlightDate`Date,`UniqueCarrier`FixedString(7),`AirlineID`Int32,`Carrier`FixedString(2),`TailNum`String,`FlightNum`String,`OriginAirportID`Int32,`OriginAirportSeqID`Int32,`OriginCityMarketID`Int32,`Origin`FixedString(5),`OriginCityName`String,`OriginState`FixedString(2),`OriginStateFips`String,`OriginStateName`String,`OriginWac`Int32,`DestAirportID`Int32,`DestAirportSeqID`Int32,`DestCityMarketID`Int32,`Dest`FixedString(5),`DestCityName`String,`DestState`FixedString(2),`DestStateFips`String,`DestStateName`String,`DestWac`Int32,`CRSDepTime`Int32,`DepTime`Int32,`DepDelay`Int32,`DepDelayMinutes`Int32,`DepDel15`Int32,`DepartureDelayGroups`String,`DepTimeBlk`String,`TaxiOut`Int32,`WheelsOff`Int32,`WheelsOn`Int32,`TaxiIn`Int32,`CRSArrTime`Int32,`ArrTime`Int32,`ArrDelay`Int32,`ArrDelayMinutes`Int32,`ArrDel15`Int32,`ArrivalDelayGroups`Int32,`ArrTimeBlk`String,`Cancelled`UInt8,`CancellationCode`FixedString(1),`Diverted`UInt8,`CRSElapsedTime`Int32,`ActualElapsedTime`Int32,`AirTime`Int32,`Flights`Int32,`Distance`Int32,`DistanceGroup`UInt8,`CarrierDelay`Int32,`WeatherDelay`Int32,`NASDelay`Int32,`SecurityDelay`Int32,`LateAircraftDelay`Int32,`FirstDepTime`String,`TotalAddGTime`String,`LongestAddGTime`String,`DivAirportLandings`String,`DivReachedDest`String,`DivActualElapsedTime`String,`DivArrDelay`String,`DivDistance`String,`Div1Airport`String,`Div1AirportID`Int32,`Div1AirportSeqID`Int32,`Div1WheelsOn`String,`Div1TotalGTime`String,`Div1LongestGTime`String,`Div1WheelsOff`String,`Div1TailNum`String,`Div2Airport`String,`Div2AirportID`Int32,`Div2AirportSeqID`Int32,`Div2WheelsOn`String,`Div2TotalGTime`String,`Div2LongestGTime`String,`Div2WheelsOff`String,`Div2TailNum`String,`Div3Airport`String,`Div3AirportID`Int32,`Div3AirportSeqID`Int32,`Div3WheelsOn`String,`Div3TotalGTime`String,`Div3LongestGTime`String,`Div3WheelsOff`String,`Div3TailNum`String,`Div4Airport`String,`Div4AirportID`Int32,`Div4AirportSeqID`Int32,`Div4WheelsOn`String,`Div4TotalGTime`String,`Div4LongestGTime`String,`Div4WheelsOff`String,`Div4TailNum`String,`Div5Airport`String,`Div5AirportID`Int32,`Div5AirportSeqID`Int32,`Div5WheelsOn`String,`Div5TotalGTime`String,`Div5LongestGTime`String,`Div5WheelsOff`String,`Div5TailNum`String) ENGINE = ReplicatedMergeTree('/clickhouse/shard3/replica', 'replica_2', FlightDate, (Year, FlightDate), 8192);
```

```sql
use testcluster_shard_2
drop table `ontime_replica`
CREATE TABLE `ontime_replica`(`Year`UInt16,`Quarter`UInt8,`Month`UInt8,`DayofMonth`UInt8,`DayOfWeek`UInt8,`FlightDate`Date,`UniqueCarrier`FixedString(7),`AirlineID`Int32,`Carrier`FixedString(2),`TailNum`String,`FlightNum`String,`OriginAirportID`Int32,`OriginAirportSeqID`Int32,`OriginCityMarketID`Int32,`Origin`FixedString(5),`OriginCityName`String,`OriginState`FixedString(2),`OriginStateFips`String,`OriginStateName`String,`OriginWac`Int32,`DestAirportID`Int32,`DestAirportSeqID`Int32,`DestCityMarketID`Int32,`Dest`FixedString(5),`DestCityName`String,`DestState`FixedString(2),`DestStateFips`String,`DestStateName`String,`DestWac`Int32,`CRSDepTime`Int32,`DepTime`Int32,`DepDelay`Int32,`DepDelayMinutes`Int32,`DepDel15`Int32,`DepartureDelayGroups`String,`DepTimeBlk`String,`TaxiOut`Int32,`WheelsOff`Int32,`WheelsOn`Int32,`TaxiIn`Int32,`CRSArrTime`Int32,`ArrTime`Int32,`ArrDelay`Int32,`ArrDelayMinutes`Int32,`ArrDel15`Int32,`ArrivalDelayGroups`Int32,`ArrTimeBlk`String,`Cancelled`UInt8,`CancellationCode`FixedString(1),`Diverted`UInt8,`CRSElapsedTime`Int32,`ActualElapsedTime`Int32,`AirTime`Int32,`Flights`Int32,`Distance`Int32,`DistanceGroup`UInt8,`CarrierDelay`Int32,`WeatherDelay`Int32,`NASDelay`Int32,`SecurityDelay`Int32,`LateAircraftDelay`Int32,`FirstDepTime`String,`TotalAddGTime`String,`LongestAddGTime`String,`DivAirportLandings`String,`DivReachedDest`String,`DivActualElapsedTime`String,`DivArrDelay`String,`DivDistance`String,`Div1Airport`String,`Div1AirportID`Int32,`Div1AirportSeqID`Int32,`Div1WheelsOn`String,`Div1TotalGTime`String,`Div1LongestGTime`String,`Div1WheelsOff`String,`Div1TailNum`String,`Div2Airport`String,`Div2AirportID`Int32,`Div2AirportSeqID`Int32,`Div2WheelsOn`String,`Div2TotalGTime`String,`Div2LongestGTime`String,`Div2WheelsOff`String,`Div2TailNum`String,`Div3Airport`String,`Div3AirportID`Int32,`Div3AirportSeqID`Int32,`Div3WheelsOn`String,`Div3TotalGTime`String,`Div3LongestGTime`String,`Div3WheelsOff`String,`Div3TailNum`String,`Div4Airport`String,`Div4AirportID`Int32,`Div4AirportSeqID`Int32,`Div4WheelsOn`String,`Div4TotalGTime`String,`Div4LongestGTime`String,`Div4WheelsOff`String,`Div4TailNum`String,`Div5Airport`String,`Div5AirportID`Int32,`Div5AirportSeqID`Int32,`Div5WheelsOn`String,`Div5TotalGTime`String,`Div5LongestGTime`String,`Div5WheelsOff`String,`Div5TailNum`String) ENGINE = ReplicatedMergeTree('/clickhouse/shard2/replica', 'replica_1', FlightDate, (Year, FlightDate), 8192);
use testcluster_shard_1
drop table `ontime_replica`
CREATE TABLE `ontime_replica`(`Year`UInt16,`Quarter`UInt8,`Month`UInt8,`DayofMonth`UInt8,`DayOfWeek`UInt8,`FlightDate`Date,`UniqueCarrier`FixedString(7),`AirlineID`Int32,`Carrier`FixedString(2),`TailNum`String,`FlightNum`String,`OriginAirportID`Int32,`OriginAirportSeqID`Int32,`OriginCityMarketID`Int32,`Origin`FixedString(5),`OriginCityName`String,`OriginState`FixedString(2),`OriginStateFips`String,`OriginStateName`String,`OriginWac`Int32,`DestAirportID`Int32,`DestAirportSeqID`Int32,`DestCityMarketID`Int32,`Dest`FixedString(5),`DestCityName`String,`DestState`FixedString(2),`DestStateFips`String,`DestStateName`String,`DestWac`Int32,`CRSDepTime`Int32,`DepTime`Int32,`DepDelay`Int32,`DepDelayMinutes`Int32,`DepDel15`Int32,`DepartureDelayGroups`String,`DepTimeBlk`String,`TaxiOut`Int32,`WheelsOff`Int32,`WheelsOn`Int32,`TaxiIn`Int32,`CRSArrTime`Int32,`ArrTime`Int32,`ArrDelay`Int32,`ArrDelayMinutes`Int32,`ArrDel15`Int32,`ArrivalDelayGroups`Int32,`ArrTimeBlk`String,`Cancelled`UInt8,`CancellationCode`FixedString(1),`Diverted`UInt8,`CRSElapsedTime`Int32,`ActualElapsedTime`Int32,`AirTime`Int32,`Flights`Int32,`Distance`Int32,`DistanceGroup`UInt8,`CarrierDelay`Int32,`WeatherDelay`Int32,`NASDelay`Int32,`SecurityDelay`Int32,`LateAircraftDelay`Int32,`FirstDepTime`String,`TotalAddGTime`String,`LongestAddGTime`String,`DivAirportLandings`String,`DivReachedDest`String,`DivActualElapsedTime`String,`DivArrDelay`String,`DivDistance`String,`Div1Airport`String,`Div1AirportID`Int32,`Div1AirportSeqID`Int32,`Div1WheelsOn`String,`Div1TotalGTime`String,`Div1LongestGTime`String,`Div1WheelsOff`String,`Div1TailNum`String,`Div2Airport`String,`Div2AirportID`Int32,`Div2AirportSeqID`Int32,`Div2WheelsOn`String,`Div2TotalGTime`String,`Div2LongestGTime`String,`Div2WheelsOff`String,`Div2TailNum`String,`Div3Airport`String,`Div3AirportID`Int32,`Div3AirportSeqID`Int32,`Div3WheelsOn`String,`Div3TotalGTime`String,`Div3LongestGTime`String,`Div3WheelsOff`String,`Div3TailNum`String,`Div4Airport`String,`Div4AirportID`Int32,`Div4AirportSeqID`Int32,`Div4WheelsOn`String,`Div4TotalGTime`String,`Div4LongestGTime`String,`Div4WheelsOff`String,`Div4TailNum`String,`Div5Airport`String,`Div5AirportID`Int32,`Div5AirportSeqID`Int32,`Div5WheelsOn`String,`Div5TotalGTime`String,`Div5LongestGTime`String,`Div5WheelsOff`String,`Div5TailNum`String) ENGINE = ReplicatedMergeTree('/clickhouse/shard1/replica', 'replica_2', FlightDate, (Year, FlightDate), 8192);
```

```sql
use testcluster_shard_3
drop table `ontime_replica`
CREATE TABLE `ontime_replica`(`Year`UInt16,`Quarter`UInt8,`Month`UInt8,`DayofMonth`UInt8,`DayOfWeek`UInt8,`FlightDate`Date,`UniqueCarrier`FixedString(7),`AirlineID`Int32,`Carrier`FixedString(2),`TailNum`String,`FlightNum`String,`OriginAirportID`Int32,`OriginAirportSeqID`Int32,`OriginCityMarketID`Int32,`Origin`FixedString(5),`OriginCityName`String,`OriginState`FixedString(2),`OriginStateFips`String,`OriginStateName`String,`OriginWac`Int32,`DestAirportID`Int32,`DestAirportSeqID`Int32,`DestCityMarketID`Int32,`Dest`FixedString(5),`DestCityName`String,`DestState`FixedString(2),`DestStateFips`String,`DestStateName`String,`DestWac`Int32,`CRSDepTime`Int32,`DepTime`Int32,`DepDelay`Int32,`DepDelayMinutes`Int32,`DepDel15`Int32,`DepartureDelayGroups`String,`DepTimeBlk`String,`TaxiOut`Int32,`WheelsOff`Int32,`WheelsOn`Int32,`TaxiIn`Int32,`CRSArrTime`Int32,`ArrTime`Int32,`ArrDelay`Int32,`ArrDelayMinutes`Int32,`ArrDel15`Int32,`ArrivalDelayGroups`Int32,`ArrTimeBlk`String,`Cancelled`UInt8,`CancellationCode`FixedString(1),`Diverted`UInt8,`CRSElapsedTime`Int32,`ActualElapsedTime`Int32,`AirTime`Int32,`Flights`Int32,`Distance`Int32,`DistanceGroup`UInt8,`CarrierDelay`Int32,`WeatherDelay`Int32,`NASDelay`Int32,`SecurityDelay`Int32,`LateAircraftDelay`Int32,`FirstDepTime`String,`TotalAddGTime`String,`LongestAddGTime`String,`DivAirportLandings`String,`DivReachedDest`String,`DivActualElapsedTime`String,`DivArrDelay`String,`DivDistance`String,`Div1Airport`String,`Div1AirportID`Int32,`Div1AirportSeqID`Int32,`Div1WheelsOn`String,`Div1TotalGTime`String,`Div1LongestGTime`String,`Div1WheelsOff`String,`Div1TailNum`String,`Div2Airport`String,`Div2AirportID`Int32,`Div2AirportSeqID`Int32,`Div2WheelsOn`String,`Div2TotalGTime`String,`Div2LongestGTime`String,`Div2WheelsOff`String,`Div2TailNum`String,`Div3Airport`String,`Div3AirportID`Int32,`Div3AirportSeqID`Int32,`Div3WheelsOn`String,`Div3TotalGTime`String,`Div3LongestGTime`String,`Div3WheelsOff`String,`Div3TailNum`String,`Div4Airport`String,`Div4AirportID`Int32,`Div4AirportSeqID`Int32,`Div4WheelsOn`String,`Div4TotalGTime`String,`Div4LongestGTime`String,`Div4WheelsOff`String,`Div4TailNum`String,`Div5Airport`String,`Div5AirportID`Int32,`Div5AirportSeqID`Int32,`Div5WheelsOn`String,`Div5TotalGTime`String,`Div5LongestGTime`String,`Div5WheelsOff`String,`Div5TailNum`String) ENGINE = ReplicatedMergeTree('/clickhouse/shard3/replica', 'replica_1', FlightDate, (Year, FlightDate), 8192);
use testcluster_shard_2
drop table `ontime_replica`
CREATE TABLE `ontime_replica`(`Year`UInt16,`Quarter`UInt8,`Month`UInt8,`DayofMonth`UInt8,`DayOfWeek`UInt8,`FlightDate`Date,`UniqueCarrier`FixedString(7),`AirlineID`Int32,`Carrier`FixedString(2),`TailNum`String,`FlightNum`String,`OriginAirportID`Int32,`OriginAirportSeqID`Int32,`OriginCityMarketID`Int32,`Origin`FixedString(5),`OriginCityName`String,`OriginState`FixedString(2),`OriginStateFips`String,`OriginStateName`String,`OriginWac`Int32,`DestAirportID`Int32,`DestAirportSeqID`Int32,`DestCityMarketID`Int32,`Dest`FixedString(5),`DestCityName`String,`DestState`FixedString(2),`DestStateFips`String,`DestStateName`String,`DestWac`Int32,`CRSDepTime`Int32,`DepTime`Int32,`DepDelay`Int32,`DepDelayMinutes`Int32,`DepDel15`Int32,`DepartureDelayGroups`String,`DepTimeBlk`String,`TaxiOut`Int32,`WheelsOff`Int32,`WheelsOn`Int32,`TaxiIn`Int32,`CRSArrTime`Int32,`ArrTime`Int32,`ArrDelay`Int32,`ArrDelayMinutes`Int32,`ArrDel15`Int32,`ArrivalDelayGroups`Int32,`ArrTimeBlk`String,`Cancelled`UInt8,`CancellationCode`FixedString(1),`Diverted`UInt8,`CRSElapsedTime`Int32,`ActualElapsedTime`Int32,`AirTime`Int32,`Flights`Int32,`Distance`Int32,`DistanceGroup`UInt8,`CarrierDelay`Int32,`WeatherDelay`Int32,`NASDelay`Int32,`SecurityDelay`Int32,`LateAircraftDelay`Int32,`FirstDepTime`String,`TotalAddGTime`String,`LongestAddGTime`String,`DivAirportLandings`String,`DivReachedDest`String,`DivActualElapsedTime`String,`DivArrDelay`String,`DivDistance`String,`Div1Airport`String,`Div1AirportID`Int32,`Div1AirportSeqID`Int32,`Div1WheelsOn`String,`Div1TotalGTime`String,`Div1LongestGTime`String,`Div1WheelsOff`String,`Div1TailNum`String,`Div2Airport`String,`Div2AirportID`Int32,`Div2AirportSeqID`Int32,`Div2WheelsOn`String,`Div2TotalGTime`String,`Div2LongestGTime`String,`Div2WheelsOff`String,`Div2TailNum`String,`Div3Airport`String,`Div3AirportID`Int32,`Div3AirportSeqID`Int32,`Div3WheelsOn`String,`Div3TotalGTime`String,`Div3LongestGTime`String,`Div3WheelsOff`String,`Div3TailNum`String,`Div4Airport`String,`Div4AirportID`Int32,`Div4AirportSeqID`Int32,`Div4WheelsOn`String,`Div4TotalGTime`String,`Div4LongestGTime`String,`Div4WheelsOff`String,`Div4TailNum`String,`Div5Airport`String,`Div5AirportID`Int32,`Div5AirportSeqID`Int32,`Div5WheelsOn`String,`Div5TotalGTime`String,`Div5LongestGTime`String,`Div5WheelsOff`String,`Div5TailNum`String) ENGINE = ReplicatedMergeTree('/clickhouse/shard2/replica', 'replica_2', FlightDate, (Year, FlightDate), 8192);
```



[https://github.com/Vertamedia/chproxy](https://github.com/Vertamedia/chproxy)

```sql
use default
CREATE TABLE `tc_distributed`(`Year`UInt16,`Quarter`UInt8,`Month`UInt8,`DayofMonth`UInt8,`DayOfWeek`UInt8,`FlightDate`Date,`UniqueCarrier`FixedString(7),`AirlineID`Int32,`Carrier`FixedString(2),`TailNum`String,`FlightNum`String,`OriginAirportID`Int32,`OriginAirportSeqID`Int32,`OriginCityMarketID`Int32,`Origin`FixedString(5),`OriginCityName`String,`OriginState`FixedString(2),`OriginStateFips`String,`OriginStateName`String,`OriginWac`Int32,`DestAirportID`Int32,`DestAirportSeqID`Int32,`DestCityMarketID`Int32,`Dest`FixedString(5),`DestCityName`String,`DestState`FixedString(2),`DestStateFips`String,`DestStateName`String,`DestWac`Int32,`CRSDepTime`Int32,`DepTime`Int32,`DepDelay`Int32,`DepDelayMinutes`Int32,`DepDel15`Int32,`DepartureDelayGroups`String,`DepTimeBlk`String,`TaxiOut`Int32,`WheelsOff`Int32,`WheelsOn`Int32,`TaxiIn`Int32,`CRSArrTime`Int32,`ArrTime`Int32,`ArrDelay`Int32,`ArrDelayMinutes`Int32,`ArrDel15`Int32,`ArrivalDelayGroups`Int32,`ArrTimeBlk`String,`Cancelled`UInt8,`CancellationCode`FixedString(1),`Diverted`UInt8,`CRSElapsedTime`Int32,`ActualElapsedTime`Int32,`AirTime`Int32,`Flights`Int32,`Distance`Int32,`DistanceGroup`UInt8,`CarrierDelay`Int32,`WeatherDelay`Int32,`NASDelay`Int32,`SecurityDelay`Int32,`LateAircraftDelay`Int32,`FirstDepTime`String,`TotalAddGTime`String,`LongestAddGTime`String,`DivAirportLandings`String,`DivReachedDest`String,`DivActualElapsedTime`String,`DivArrDelay`String,`DivDistance`String,`Div1Airport`String,`Div1AirportID`Int32,`Div1AirportSeqID`Int32,`Div1WheelsOn`String,`Div1TotalGTime`String,`Div1LongestGTime`String,`Div1WheelsOff`String,`Div1TailNum`String,`Div2Airport`String,`Div2AirportID`Int32,`Div2AirportSeqID`Int32,`Div2WheelsOn`String,`Div2TotalGTime`String,`Div2LongestGTime`String,`Div2WheelsOff`String,`Div2TailNum`String,`Div3Airport`String,`Div3AirportID`Int32,`Div3AirportSeqID`Int32,`Div3WheelsOn`String,`Div3TotalGTime`String,`Div3LongestGTime`String,`Div3WheelsOff`String,`Div3TailNum`String,`Div4Airport`String,`Div4AirportID`Int32,`Div4AirportSeqID`Int32,`Div4WheelsOn`String,`Div4TotalGTime`String,`Div4LongestGTime`String,`Div4WheelsOff`String,`Div4TailNum`String,`Div5Airport`String,`Div5AirportID`Int32,`Div5AirportSeqID`Int32,`Div5WheelsOn`String,`Div5TotalGTime`String,`Div5LongestGTime`String,`Div5WheelsOff`String,`Div5TailNum`String)  ENGINE = Distributed( 'cluster_3shards_2replicas', '', ontime_replica, rand() )
```





```text

… 
ENGINE = Distributed( ‘testcluster’, ‘’, tc_shard, rand() )



```



### 三分片三副本



```sql
create database IF NOT EXISTS cluster_shard_1
use cluster_shard_1
drop table `ontime_replica`
CREATE TABLE `ontime_replica`(`Year`UInt16,`Quarter`UInt8,`Month`UInt8,`DayofMonth`UInt8,`DayOfWeek`UInt8,`FlightDate`Date,`UniqueCarrier`FixedString(7),`AirlineID`Int32,`Carrier`FixedString(2),`TailNum`String,`FlightNum`String,`OriginAirportID`Int32,`OriginAirportSeqID`Int32,`OriginCityMarketID`Int32,`Origin`FixedString(5),`OriginCityName`String,`OriginState`FixedString(2),`OriginStateFips`String,`OriginStateName`String,`OriginWac`Int32,`DestAirportID`Int32,`DestAirportSeqID`Int32,`DestCityMarketID`Int32,`Dest`FixedString(5),`DestCityName`String,`DestState`FixedString(2),`DestStateFips`String,`DestStateName`String,`DestWac`Int32,`CRSDepTime`Int32,`DepTime`Int32,`DepDelay`Int32,`DepDelayMinutes`Int32,`DepDel15`Int32,`DepartureDelayGroups`String,`DepTimeBlk`String,`TaxiOut`Int32,`WheelsOff`Int32,`WheelsOn`Int32,`TaxiIn`Int32,`CRSArrTime`Int32,`ArrTime`Int32,`ArrDelay`Int32,`ArrDelayMinutes`Int32,`ArrDel15`Int32,`ArrivalDelayGroups`Int32,`ArrTimeBlk`String,`Cancelled`UInt8,`CancellationCode`FixedString(1),`Diverted`UInt8,`CRSElapsedTime`Int32,`ActualElapsedTime`Int32,`AirTime`Int32,`Flights`Int32,`Distance`Int32,`DistanceGroup`UInt8,`CarrierDelay`Int32,`WeatherDelay`Int32,`NASDelay`Int32,`SecurityDelay`Int32,`LateAircraftDelay`Int32,`FirstDepTime`String,`TotalAddGTime`String,`LongestAddGTime`String,`DivAirportLandings`String,`DivReachedDest`String,`DivActualElapsedTime`String,`DivArrDelay`String,`DivDistance`String,`Div1Airport`String,`Div1AirportID`Int32,`Div1AirportSeqID`Int32,`Div1WheelsOn`String,`Div1TotalGTime`String,`Div1LongestGTime`String,`Div1WheelsOff`String,`Div1TailNum`String,`Div2Airport`String,`Div2AirportID`Int32,`Div2AirportSeqID`Int32,`Div2WheelsOn`String,`Div2TotalGTime`String,`Div2LongestGTime`String,`Div2WheelsOff`String,`Div2TailNum`String,`Div3Airport`String,`Div3AirportID`Int32,`Div3AirportSeqID`Int32,`Div3WheelsOn`String,`Div3TotalGTime`String,`Div3LongestGTime`String,`Div3WheelsOff`String,`Div3TailNum`String,`Div4Airport`String,`Div4AirportID`Int32,`Div4AirportSeqID`Int32,`Div4WheelsOn`String,`Div4TotalGTime`String,`Div4LongestGTime`String,`Div4WheelsOff`String,`Div4TailNum`String,`Div5Airport`String,`Div5AirportID`Int32,`Div5AirportSeqID`Int32,`Div5WheelsOn`String,`Div5TotalGTime`String,`Div5LongestGTime`String,`Div5WheelsOff`String,`Div5TailNum`String) ENGINE = ReplicatedMergeTree('/clickhouse/33/shard1/replica', 'replica_1', FlightDate, (Year, FlightDate), 8192);

create database IF NOT EXISTS cluster_shard_2
use cluster_shard_2
drop table `ontime_replica`
CREATE TABLE `ontime_replica`(`Year`UInt16,`Quarter`UInt8,`Month`UInt8,`DayofMonth`UInt8,`DayOfWeek`UInt8,`FlightDate`Date,`UniqueCarrier`FixedString(7),`AirlineID`Int32,`Carrier`FixedString(2),`TailNum`String,`FlightNum`String,`OriginAirportID`Int32,`OriginAirportSeqID`Int32,`OriginCityMarketID`Int32,`Origin`FixedString(5),`OriginCityName`String,`OriginState`FixedString(2),`OriginStateFips`String,`OriginStateName`String,`OriginWac`Int32,`DestAirportID`Int32,`DestAirportSeqID`Int32,`DestCityMarketID`Int32,`Dest`FixedString(5),`DestCityName`String,`DestState`FixedString(2),`DestStateFips`String,`DestStateName`String,`DestWac`Int32,`CRSDepTime`Int32,`DepTime`Int32,`DepDelay`Int32,`DepDelayMinutes`Int32,`DepDel15`Int32,`DepartureDelayGroups`String,`DepTimeBlk`String,`TaxiOut`Int32,`WheelsOff`Int32,`WheelsOn`Int32,`TaxiIn`Int32,`CRSArrTime`Int32,`ArrTime`Int32,`ArrDelay`Int32,`ArrDelayMinutes`Int32,`ArrDel15`Int32,`ArrivalDelayGroups`Int32,`ArrTimeBlk`String,`Cancelled`UInt8,`CancellationCode`FixedString(1),`Diverted`UInt8,`CRSElapsedTime`Int32,`ActualElapsedTime`Int32,`AirTime`Int32,`Flights`Int32,`Distance`Int32,`DistanceGroup`UInt8,`CarrierDelay`Int32,`WeatherDelay`Int32,`NASDelay`Int32,`SecurityDelay`Int32,`LateAircraftDelay`Int32,`FirstDepTime`String,`TotalAddGTime`String,`LongestAddGTime`String,`DivAirportLandings`String,`DivReachedDest`String,`DivActualElapsedTime`String,`DivArrDelay`String,`DivDistance`String,`Div1Airport`String,`Div1AirportID`Int32,`Div1AirportSeqID`Int32,`Div1WheelsOn`String,`Div1TotalGTime`String,`Div1LongestGTime`String,`Div1WheelsOff`String,`Div1TailNum`String,`Div2Airport`String,`Div2AirportID`Int32,`Div2AirportSeqID`Int32,`Div2WheelsOn`String,`Div2TotalGTime`String,`Div2LongestGTime`String,`Div2WheelsOff`String,`Div2TailNum`String,`Div3Airport`String,`Div3AirportID`Int32,`Div3AirportSeqID`Int32,`Div3WheelsOn`String,`Div3TotalGTime`String,`Div3LongestGTime`String,`Div3WheelsOff`String,`Div3TailNum`String,`Div4Airport`String,`Div4AirportID`Int32,`Div4AirportSeqID`Int32,`Div4WheelsOn`String,`Div4TotalGTime`String,`Div4LongestGTime`String,`Div4WheelsOff`String,`Div4TailNum`String,`Div5Airport`String,`Div5AirportID`Int32,`Div5AirportSeqID`Int32,`Div5WheelsOn`String,`Div5TotalGTime`String,`Div5LongestGTime`String,`Div5WheelsOff`String,`Div5TailNum`String) ENGINE = ReplicatedMergeTree('/clickhouse/33/shard2/replica', 'replica_2', FlightDate, (Year, FlightDate), 8192);

create database IF NOT EXISTS cluster_shard_3
use cluster_shard_3
drop table `ontime_replica`
CREATE TABLE `ontime_replica`(`Year`UInt16,`Quarter`UInt8,`Month`UInt8,`DayofMonth`UInt8,`DayOfWeek`UInt8,`FlightDate`Date,`UniqueCarrier`FixedString(7),`AirlineID`Int32,`Carrier`FixedString(2),`TailNum`String,`FlightNum`String,`OriginAirportID`Int32,`OriginAirportSeqID`Int32,`OriginCityMarketID`Int32,`Origin`FixedString(5),`OriginCityName`String,`OriginState`FixedString(2),`OriginStateFips`String,`OriginStateName`String,`OriginWac`Int32,`DestAirportID`Int32,`DestAirportSeqID`Int32,`DestCityMarketID`Int32,`Dest`FixedString(5),`DestCityName`String,`DestState`FixedString(2),`DestStateFips`String,`DestStateName`String,`DestWac`Int32,`CRSDepTime`Int32,`DepTime`Int32,`DepDelay`Int32,`DepDelayMinutes`Int32,`DepDel15`Int32,`DepartureDelayGroups`String,`DepTimeBlk`String,`TaxiOut`Int32,`WheelsOff`Int32,`WheelsOn`Int32,`TaxiIn`Int32,`CRSArrTime`Int32,`ArrTime`Int32,`ArrDelay`Int32,`ArrDelayMinutes`Int32,`ArrDel15`Int32,`ArrivalDelayGroups`Int32,`ArrTimeBlk`String,`Cancelled`UInt8,`CancellationCode`FixedString(1),`Diverted`UInt8,`CRSElapsedTime`Int32,`ActualElapsedTime`Int32,`AirTime`Int32,`Flights`Int32,`Distance`Int32,`DistanceGroup`UInt8,`CarrierDelay`Int32,`WeatherDelay`Int32,`NASDelay`Int32,`SecurityDelay`Int32,`LateAircraftDelay`Int32,`FirstDepTime`String,`TotalAddGTime`String,`LongestAddGTime`String,`DivAirportLandings`String,`DivReachedDest`String,`DivActualElapsedTime`String,`DivArrDelay`String,`DivDistance`String,`Div1Airport`String,`Div1AirportID`Int32,`Div1AirportSeqID`Int32,`Div1WheelsOn`String,`Div1TotalGTime`String,`Div1LongestGTime`String,`Div1WheelsOff`String,`Div1TailNum`String,`Div2Airport`String,`Div2AirportID`Int32,`Div2AirportSeqID`Int32,`Div2WheelsOn`String,`Div2TotalGTime`String,`Div2LongestGTime`String,`Div2WheelsOff`String,`Div2TailNum`String,`Div3Airport`String,`Div3AirportID`Int32,`Div3AirportSeqID`Int32,`Div3WheelsOn`String,`Div3TotalGTime`String,`Div3LongestGTime`String,`Div3WheelsOff`String,`Div3TailNum`String,`Div4Airport`String,`Div4AirportID`Int32,`Div4AirportSeqID`Int32,`Div4WheelsOn`String,`Div4TotalGTime`String,`Div4LongestGTime`String,`Div4WheelsOff`String,`Div4TailNum`String,`Div5Airport`String,`Div5AirportID`Int32,`Div5AirportSeqID`Int32,`Div5WheelsOn`String,`Div5TotalGTime`String,`Div5LongestGTime`String,`Div5WheelsOff`String,`Div5TailNum`String) ENGINE = ReplicatedMergeTree('/clickhouse/33/shard3/replica', 'replica_3', FlightDate, (Year, FlightDate), 8192);
```







```sql
use default
drop table `cluster_shard_33`
CREATE TABLE `cluster_shard_33`(`Year`UInt16,`Quarter`UInt8,`Month`UInt8,`DayofMonth`UInt8,`DayOfWeek`UInt8,`FlightDate`Date,`UniqueCarrier`FixedString(7),`AirlineID`Int32,`Carrier`FixedString(2),`TailNum`String,`FlightNum`String,`OriginAirportID`Int32,`OriginAirportSeqID`Int32,`OriginCityMarketID`Int32,`Origin`FixedString(5),`OriginCityName`String,`OriginState`FixedString(2),`OriginStateFips`String,`OriginStateName`String,`OriginWac`Int32,`DestAirportID`Int32,`DestAirportSeqID`Int32,`DestCityMarketID`Int32,`Dest`FixedString(5),`DestCityName`String,`DestState`FixedString(2),`DestStateFips`String,`DestStateName`String,`DestWac`Int32,`CRSDepTime`Int32,`DepTime`Int32,`DepDelay`Int32,`DepDelayMinutes`Int32,`DepDel15`Int32,`DepartureDelayGroups`String,`DepTimeBlk`String,`TaxiOut`Int32,`WheelsOff`Int32,`WheelsOn`Int32,`TaxiIn`Int32,`CRSArrTime`Int32,`ArrTime`Int32,`ArrDelay`Int32,`ArrDelayMinutes`Int32,`ArrDel15`Int32,`ArrivalDelayGroups`Int32,`ArrTimeBlk`String,`Cancelled`UInt8,`CancellationCode`FixedString(1),`Diverted`UInt8,`CRSElapsedTime`Int32,`ActualElapsedTime`Int32,`AirTime`Int32,`Flights`Int32,`Distance`Int32,`DistanceGroup`UInt8,`CarrierDelay`Int32,`WeatherDelay`Int32,`NASDelay`Int32,`SecurityDelay`Int32,`LateAircraftDelay`Int32,`FirstDepTime`String,`TotalAddGTime`String,`LongestAddGTime`String,`DivAirportLandings`String,`DivReachedDest`String,`DivActualElapsedTime`String,`DivArrDelay`String,`DivDistance`String,`Div1Airport`String,`Div1AirportID`Int32,`Div1AirportSeqID`Int32,`Div1WheelsOn`String,`Div1TotalGTime`String,`Div1LongestGTime`String,`Div1WheelsOff`String,`Div1TailNum`String,`Div2Airport`String,`Div2AirportID`Int32,`Div2AirportSeqID`Int32,`Div2WheelsOn`String,`Div2TotalGTime`String,`Div2LongestGTime`String,`Div2WheelsOff`String,`Div2TailNum`String,`Div3Airport`String,`Div3AirportID`Int32,`Div3AirportSeqID`Int32,`Div3WheelsOn`String,`Div3TotalGTime`String,`Div3LongestGTime`String,`Div3WheelsOff`String,`Div3TailNum`String,`Div4Airport`String,`Div4AirportID`Int32,`Div4AirportSeqID`Int32,`Div4WheelsOn`String,`Div4TotalGTime`String,`Div4LongestGTime`String,`Div4WheelsOff`String,`Div4TailNum`String,`Div5Airport`String,`Div5AirportID`Int32,`Div5AirportSeqID`Int32,`Div5WheelsOn`String,`Div5TotalGTime`String,`Div5LongestGTime`String,`Div5WheelsOff`String,`Div5TailNum`String)  ENGINE = Distributed( 'cluster_3shards_3replicas', '', ontime_replica, rand() )
```

